# ===== Minimal auth-only config =====
# Порт прокси
http_port 3128

# Базовая авторизация (логин/пароль через htpasswd)
auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwd
auth_param basic realm Squid Proxy
auth_param basic credentialsttl 2 hours
acl authenticated proxy_auth REQUIRED

# Разрешить только аутентифицированным
http_access allow authenticated
http_access deny all

# Приватность
via off
forwarded_for off
# В новых версиях может быть предупреждение, но правило рабочее:
request_header_access Authorization deny all

# IPv4 приоритет (часто полезно на VPS)
dns_v4_first on

# Логи стандартные
access_log daemon:/var/log/squid/access.log
cache_log /var/log/squid/cache.log
cache_store_log none

# Небольшой кэш
cache_mem 64 MB
maximum_object_size_in_memory 512 KB
